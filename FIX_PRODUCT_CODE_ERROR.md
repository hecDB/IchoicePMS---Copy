# ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: Unknown column 'p.code'

## ‚ùå ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö
```
Fatal error: Uncaught PDOException: SQLSTATE[42S22]: Column not found: 1054 
Unknown column 'p.code' in 'field list' in cancelled_items.php:46
```

## üîç ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏
‡∏ï‡∏≤‡∏£‡∏≤‡∏á `products` ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå `sku` ‡πÅ‡∏ó‡∏ô `code` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤

## ‚úÖ ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

### ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å:
```sql
p.code as product_code
```

### ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô:
```sql
COALESCE(p.sku, '-') as product_code
```

### ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏≠‡∏∑‡πà‡∏ô:
1. **‡∏•‡∏ö‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô:**
   - ‡∏•‡∏ö `po.currency_id` (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ)

2. **‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô:**
   - `COALESCE(p.sku, '-')` - ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‡πÉ‡∏ä‡πâ '-'
   - `COALESCE(poi.unit, '‡∏´‡∏ô‡πà‡∏ß‡∏¢')` - ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‡πÉ‡∏ä‡πâ '‡∏´‡∏ô‡πà‡∏ß‡∏¢'
   - `'THB' as currency_code` - ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô

## üìä Column Mapping

| Field | Source | Default |
|-------|--------|---------|
| product_name | p.name | (null) |
| product_code | p.sku | '-' |
| unit_name | poi.unit | '‡∏´‡∏ô‡πà‡∏ß‡∏¢' |
| currency_code | Hardcoded | 'THB' |

## ‚ú® ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ SQL Error  
‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (SKU) ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á  
‚úÖ ‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
