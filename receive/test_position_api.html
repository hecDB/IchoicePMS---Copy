<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>ทดสอบ Position API</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container py-4">
    <h2>ทดสอบ Position API</h2>
    
    <div class="mb-3">
        <label for="receive-id" class="form-label">Receive ID:</label>
        <input type="number" class="form-control" id="receive-id" value="1" style="width: 200px;">
        <button class="btn btn-primary mt-2" onclick="testAPI()">ทดสอบ API</button>
    </div>
    
    <div id="result" class="mt-3"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script>
function testAPI() {
    const receiveId = document.getElementById('receive-id').value;
    
    if (!receiveId) {
        document.getElementById('result').innerHTML = '<div class="alert alert-warning">กรุณาใส่ Receive ID</div>';
        return;
    }
    
    document.getElementById('result').innerHTML = '<div class="alert alert-info">กำลังทดสอบ...</div>';
    
    console.log('Testing API with receive_id:', receiveId);
    
    $.get('../api/receive_position_api.php', { receive_id: receiveId }, function(resp) {
        console.log('API Response:', resp);
        
        let html = '<div class="alert alert-success">';
        html += '<h5>ผลลัพธ์:</h5>';
        html += '<pre>' + JSON.stringify(resp, null, 2) + '</pre>';
        html += '</div>';
        
        document.getElementById('result').innerHTML = html;
    }).fail(function(xhr, status, error) {
        console.error('API Error:', xhr, status, error);
        
        let html = '<div class="alert alert-danger">';
        html += '<h5>เกิดข้อผิดพลาด:</h5>';
        html += '<p><strong>Status:</strong> ' + xhr.status + '</p>';
        html += '<p><strong>Status Text:</strong> ' + xhr.statusText + '</p>';
        html += '<p><strong>Response:</strong></p>';
        html += '<pre>' + xhr.responseText + '</pre>';
        html += '</div>';
        
        document.getElementById('result').innerHTML = html;
    });
}

// Auto test on page load
$(document).ready(function() {
    testAPI();
});
</script>
</body>
</html>