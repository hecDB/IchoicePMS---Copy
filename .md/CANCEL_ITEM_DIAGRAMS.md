# à¹„à¸”à¸­à¸°à¹à¸à¸£à¸¡ - à¸£à¸°à¸šà¸šà¸à¸²à¸£à¸¢à¸à¹€à¸¥à¸´à¸à¸ªà¸´à¸™à¸„à¹‰à¸² (2 à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚)

## 1. User Interface Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    à¸«à¸™à¹‰à¸² "à¸£à¸±à¸šà¹€à¸‚à¹‰à¸²à¸ªà¸´à¸™à¸„à¹‰à¸²"                          â”‚
â”‚         /receive/receive_po_items.php                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ PO List:                                               â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚ PO#      â”‚ Supplier â”‚ Status   â”‚ Actions          â”‚ â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚    â”‚
â”‚  â”‚  â”‚ PO-001   â”‚ Supplier A
â”‚ Pending  â”‚ [ğŸ”· receive] [ğŸ‘ view]  â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â†“ Click [ğŸ”· receive]                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         Modal: PO-001 Items List                      â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚ No â”‚ Product  â”‚ Qty  â”‚ Recv â”‚ Remain â”‚ Action    â”‚ â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚    â”‚
â”‚  â”‚  â”‚ 1  â”‚ Item A   â”‚ 100  â”‚  30  â”‚  70   â”‚ [âš¡][âŒ]    â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ 2  â”‚ Item B   â”‚  50  â”‚  20  â”‚  30   â”‚ [âš¡][âŒ]    â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  âš¡ = Quick Receive    âŒ = Cancel                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â†“ Click [âŒ]                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚    Modal: à¸¢à¸à¹€à¸¥à¸´à¸à¸ªà¸´à¸™à¸„à¹‰à¸² (Cancel Item)                  â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚ à¸ªà¸´à¸™à¸„à¹‰à¸²: Item A                                        â”‚    â”‚
â”‚  â”‚ à¸ˆà¸³à¸™à¸§à¸™à¸ªà¸±à¹ˆà¸‡: 100 | à¸ˆà¸³à¸™à¸§à¸™à¸£à¸±à¸šà¹à¸¥à¹‰à¸§: 30                  â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚ â”Œâ”€ à¸›à¸£à¸°à¹€à¸ à¸—à¸à¸²à¸£à¸¢à¸à¹€à¸¥à¸´à¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚ â”‚ â—‹ à¸¢à¸à¹€à¸¥à¸´à¸à¸ˆà¸³à¸™à¸§à¸™à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”                           â”‚    â”‚    â”‚
â”‚  â”‚ â”‚   à¹€à¸¥à¸´à¸à¸à¸²à¸£à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¹à¸¥à¸°à¸›à¸´à¸” PO à¸—à¸µà¹ˆ 100%           â”‚    â”‚    â”‚
â”‚  â”‚ â”‚                                                â”‚    â”‚    â”‚
â”‚  â”‚ â”‚ â— à¸¢à¸à¹€à¸¥à¸´à¸à¸šà¸²à¸‡à¸ˆà¸³à¸™à¸§à¸™                              â”‚    â”‚    â”‚
â”‚  â”‚ â”‚   à¸à¸£à¸­à¸à¸ˆà¸³à¸™à¸§à¸™à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸¢à¸à¹€à¸¥à¸´à¸                    â”‚    â”‚    â”‚
â”‚  â”‚ â”‚                                                â”‚    â”‚    â”‚
â”‚  â”‚ â”‚   [à¸ˆà¸³à¸™à¸§à¸™à¸—à¸µà¹ˆà¸¢à¸à¹€à¸¥à¸´à¸: __30__] (à¸ªà¸¹à¸‡à¸ªà¸¸à¸”: 100)     â”‚    â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚ â”Œâ”€ à¹€à¸«à¸•à¸¸à¸œà¸¥à¸à¸²à¸£à¸¢à¸à¹€à¸¥à¸´à¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚ â”‚ [â–¼ à¸ªà¸´à¸™à¸„à¹‰à¸²à¹„à¸¡à¹ˆà¸„à¸£à¸šà¸•à¸²à¸¡à¸ˆà¸³à¸™à¸§à¸™à¸—à¸µà¹ˆà¸ªà¸±à¹ˆà¸‡]              â”‚    â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚ à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸à¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡:                                    â”‚    â”‚
â”‚  â”‚ [Supplier à¸›à¸£à¸°à¸à¸²à¸¨à¸ªà¹ˆà¸‡à¸„à¸£à¸šà¹€à¸à¸µà¸¢à¸‡ 30 à¸«à¸™à¹ˆà¸§à¸¢]          â”‚    â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  [Cancel]  [âœ“ Confirm Cancel]                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â†“ Click [âœ“]                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚        Confirmation Dialog                            â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  "à¸¢à¸à¹€à¸¥à¸´à¸à¸ªà¸´à¸™à¸„à¹‰à¸² 30 à¸«à¸™à¹ˆà¸§à¸¢"                              â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚   [Cancel]  [âœ“ Confirm]                             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â†“ Processing                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  âœ… à¸¢à¸à¹€à¸¥à¸´à¸à¸ªà¸´à¸™à¸„à¹‰à¸²à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!                              â”‚    â”‚
â”‚  â”‚  Modal à¸›à¸´à¸” â†’ Page à¸£à¸µà¹‚à¸«à¸¥à¸” â†’ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸­à¸±à¸›à¹€à¸”à¸•             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Database Schema Update

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          purchase_order_items (à¸•à¸²à¸£à¸²à¸‡)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ item_id              INT         PRIMARY KEY                  â”‚
â”‚ po_id                INT         FOREIGN KEY                  â”‚
â”‚ product_id           INT         FOREIGN KEY                  â”‚
â”‚ qty                  FLOAT                                    â”‚
â”‚ price_per_unit       DECIMAL                                 â”‚
â”‚ is_cancelled         TINYINT(1)  [à¹€à¸à¹ˆà¸²] âœ…                  â”‚
â”‚ is_partially_cancelled TINYINT(1) [à¹ƒà¸«à¸¡à¹ˆ] âœ…                  â”‚
â”‚ cancel_qty_reason    FLOAT       [à¹ƒà¸«à¸¡à¹ˆ] âœ…                  â”‚
â”‚ cancelled_by         INT         [à¹€à¸à¹ˆà¸²] âœ…                  â”‚
â”‚ cancelled_at         DATETIME    [à¹€à¸à¹ˆà¸²] âœ…                  â”‚
â”‚ cancel_reason        VARCHAR(100) [à¹€à¸à¹ˆà¸²] âœ…                 â”‚
â”‚ cancel_notes         TEXT        [à¹€à¸à¹ˆà¸²] âœ…                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“ à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¹‚à¸¢à¸‡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          receive_items (à¸•à¸²à¸£à¸²à¸‡)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ receive_id           INT         PRIMARY KEY                  â”‚
â”‚ item_id              INT         FOREIGN KEY â†‘                â”‚
â”‚ po_id                INT         FOREIGN KEY                  â”‚
â”‚ receive_qty          FLOAT       [à¸£à¸±à¸šà¸ˆà¸³à¸™à¸§à¸™]                 â”‚
â”‚ created_by           INT         [à¸œà¸¹à¹‰à¸šà¸±à¸™à¸—à¸¶à¸]                 â”‚
â”‚ created_at           DATETIME                                â”‚
â”‚ remark               TEXT        [à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸]                 â”‚
â”‚ expiry_date          DATE        [à¸§à¸±à¸™à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“ à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¹‚à¸¢à¸‡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          purchase_orders (à¸•à¸²à¸£à¸²à¸‡)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ po_id                INT         PRIMARY KEY                  â”‚
â”‚ po_number            VARCHAR                                  â”‚
â”‚ status               VARCHAR     â† à¸­à¸±à¸›à¹€à¸”à¸•à¹€à¸›à¹‡à¸™             â”‚
â”‚                                  'completed' / 'partial'      â”‚
â”‚ ...                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Logic Flow - à¸¢à¸à¹€à¸¥à¸´à¸à¸ˆà¸³à¸™à¸§à¸™à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”

```
                    START
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ GET Item Information    â”‚
        â”‚ (ordered_qty, received) â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ CREATE receive_items record:   â”‚
    â”‚ qty = ordered_qty - received   â”‚
    â”‚ remark = "à¸¢à¸à¹€à¸¥à¸´à¸à¸ˆà¸³à¸™à¸§à¸™à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”" â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ UPDATE purchase_order_items:   â”‚
    â”‚ is_cancelled = 1               â”‚
    â”‚ cancel_qty_reason = ordered    â”‚
    â”‚ cancelled_by = user_id         â”‚
    â”‚ cancelled_at = NOW()           â”‚
    â”‚ cancel_reason = [reason]       â”‚
    â”‚ cancel_notes = [notes]         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ updatePOStatus()               â”‚
    â”‚ All items completed?           â”‚
    â”‚ â†’ YES: status = 'completed'    â”‚
    â”‚ â†’ NO: status = 'partial'       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ INSERT activity_logs           â”‚
    â”‚ action = 'cancel_po_item'      â”‚
    â”‚ description = details          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
                   SUCCESS
                      â”‚
                      â–¼
             Return JSON Response:
          { success: true, message: '...' }
```

---

## 4. Logic Flow - à¸¢à¸à¹€à¸¥à¸´à¸à¸šà¸²à¸‡à¸ªà¹ˆà¸§à¸™

```
                    START
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ VALIDATE Input                   â”‚
        â”‚ cancel_qty > 0?                  â”‚
        â”‚ cancel_qty <= ordered_qty?       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        NO â†â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â†’ YES
       ERROR     â”‚        â”‚
                 â–¼        â–¼
            Update   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            Item:    â”‚ UPDATE purchase_order:  â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤ is_partially_cancelled=1â”‚
            â”‚        â”‚ cancel_qty_reason=qty   â”‚
            â”‚        â”‚ cancelled_by=user_id    â”‚
            â”‚        â”‚ cancelled_at=NOW()      â”‚
            â”‚        â”‚ cancel_reason=[reason]  â”‚
            â”‚        â”‚ cancel_notes=[notes]    â”‚
            â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                 â”‚
            â”‚                 â–¼
            â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚     â”‚ CHECK Completion        â”‚
            â”‚     â”‚ (received + cancelled   â”‚
            â”‚     â”‚  >= ordered)?           â”‚
            â”‚     â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜
            â”‚        â”‚                  â”‚
            â”‚      YES                  NO
            â”‚        â”‚                  â”‚
            â”‚    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”         â”Œâ”€â”€â–¼â”€â”€â”
            â”‚    â”‚Completeâ”‚         â”‚Partial
            â”‚    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”¬â”€â”€â”˜
            â”‚        â”‚                  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ UPDATE purchase_orders status:   â”‚
        â”‚ WHERE po_id = ?                  â”‚
        â”‚ SET status = [result]            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ INSERT activity_logs             â”‚
        â”‚ action = 'cancel_po_item'        â”‚
        â”‚ description = details            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
                SUCCESS
                   â”‚
                   â–¼
        Return JSON Response:
    { success: true, message: '...' }
```

---

## 5. Decision Tree - PO Status Update

```
                   Check PO Items
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                â”‚
        â–¼                                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Fully Received? â”‚         â”‚ Fully Cancelled? â”‚
    â”‚ (received >=    â”‚         â”‚ (cancel_qty >=   â”‚
    â”‚  ordered)       â”‚         â”‚  ordered)        â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                           â”‚
      YESâ”‚                        YESâ”‚
         â”‚                           â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Count Completed Items  â”‚
                    â”‚ (Fully Received OR     â”‚
                    â”‚  Fully Cancelled)      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚            â”‚            â”‚
                â–¼            â–¼            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 0 Items     â”‚ â”‚ 1-N-1    â”‚ â”‚ N Items â”‚
        â”‚ Completed   â”‚ â”‚ Items    â”‚ â”‚ (All)   â”‚
        â”‚             â”‚ â”‚ Completedâ”‚ â”‚ Completed
        â”‚ pending     â”‚ â”‚          â”‚ â”‚ completed
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ partial  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

N = Total items in PO
```

---

## 6. UI State Changes

### à¸à¹ˆà¸­à¸™: à¸à¸”à¸›à¸¸à¹ˆà¸¡à¸¢à¸à¹€à¸¥à¸´à¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Modal à¸¢à¸à¹€à¸¥à¸´à¸à¸ªà¸´à¸™à¸„à¹‰à¸² (à¸›à¸´à¸”)          â”‚
â”‚                                     â”‚
â”‚ [à¹„à¸¡à¹ˆà¹€à¸«à¹‡à¸™ UI à¸™à¸µà¹‰]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### à¸«à¸¥à¸±à¸‡: à¹€à¸¥à¸·à¸­à¸ "à¸¢à¸à¹€à¸¥à¸´à¸à¸ˆà¸³à¸™à¸§à¸™à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Modal à¸¢à¸à¹€à¸¥à¸´à¸à¸ªà¸´à¸™à¸„à¹‰à¸² (à¹€à¸›à¸´à¸”)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â— à¸¢à¸à¹€à¸¥à¸´à¸à¸ˆà¸³à¸™à¸§à¸™à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”                      â”‚
â”‚ â—‹ à¸¢à¸à¹€à¸¥à¸´à¸à¸šà¸²à¸‡à¸ˆà¸³à¸™à¸§à¸™                         â”‚
â”‚                                            â”‚
â”‚ [à¸ˆà¸³à¸™à¸§à¸™à¸—à¸µà¹ˆà¸¢à¸à¹€à¸¥à¸´à¸: __] (à¸‹à¹ˆà¸­à¸™)              â”‚
â”‚                                            â”‚
â”‚ à¹€à¸«à¸•à¸¸à¸œà¸¥: [dropdown]                        â”‚
â”‚ à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸: [textarea]                      â”‚
â”‚                                            â”‚
â”‚ [Cancel]  [âœ“ Confirm]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### à¸«à¸¥à¸±à¸‡: à¹€à¸¥à¸·à¸­à¸ "à¸¢à¸à¹€à¸¥à¸´à¸à¸šà¸²à¸‡à¸ˆà¸³à¸™à¸§à¸™"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Modal à¸¢à¸à¹€à¸¥à¸´à¸à¸ªà¸´à¸™à¸„à¹‰à¸² (à¹€à¸›à¸´à¸”)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â—‹ à¸¢à¸à¹€à¸¥à¸´à¸à¸ˆà¸³à¸™à¸§à¸™à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”                      â”‚
â”‚ â— à¸¢à¸à¹€à¸¥à¸´à¸à¸šà¸²à¸‡à¸ˆà¸³à¸™à¸§à¸™                         â”‚
â”‚                                            â”‚
â”‚ [à¸ˆà¸³à¸™à¸§à¸™à¸—à¸µà¹ˆà¸¢à¸à¹€à¸¥à¸´à¸: __50__] (à¹à¸ªà¸”à¸‡!)        â”‚
â”‚ â†‘ à¸šà¸±à¸‡à¸„à¸±à¸šà¸à¸£à¸­à¸, à¸ªà¸¹à¸‡à¸ªà¸¸à¸”: 100                â”‚
â”‚                                            â”‚
â”‚ à¹€à¸«à¸•à¸¸à¸œà¸¥: [dropdown]                        â”‚
â”‚ à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸: [textarea]                      â”‚
â”‚                                            â”‚
â”‚ [Cancel]  [âœ“ Confirm]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. Data Flow Diagram

```
Frontend                          Backend                     Database
(receive_po_items.php)      (process_receive_po.php)       (MySQL)
        â”‚                              â”‚                        â”‚
        â”‚ User clicks âŒ               â”‚                        â”‚
        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ showCancelItemModal()                â”‚
        â”‚                 (pass data)  â”‚                        â”‚
        â”‚                              â”‚                        â”‚
        â”‚ User fills form              â”‚                        â”‚
        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ POST /process_receive_po.php         â”‚
        â”‚                 (JSON data)  â”‚                        â”‚
        â”‚                              â”œâ”€â”€à¹ƒà¸«à¸¡à¹ˆ: Query â”€â”€â†’      SELECT ...
        â”‚                              â”‚ (à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š)             FROM PO_items
        â”‚                              â”‚                        â”‚
        â”‚                              â”œâ”€â”€à¹„à¸›: INSERT/UPDATE     â”‚
        â”‚                              â”‚ (à¸šà¸±à¸™à¸—à¸¶à¸)        â”€â”€â†’   INSERT/UPDATE
        â”‚                              â”‚                        â”‚
        â”‚                              â”œâ”€â”€à¸«à¸²: SELECT â”€â”€â†’        GROUP BY
        â”‚                              â”‚ (à¸„à¸³à¸™à¸§à¸“à¸ªà¸–à¸²à¸™à¸°)          â”‚
        â”‚                              â”‚                        â”‚
        â”‚                              â”œâ”€â”€à¹„à¸›: UPDATE â”€â”€â†’        UPDATE status
        â”‚                              â”‚ (PO status)            â”‚
        â”‚                              â”‚                        â”‚
        â”‚ â† JSON Response              â”‚                        â”‚
        â”‚ (success: true,              â”‚                        â”‚
        â”‚  message: '...')             â”‚                        â”‚
        â”‚                              â”‚                        â”‚
        â”‚ Close Modal                  â”‚                        â”‚
        â”‚ Reload Page        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ à¸à¸¥à¸±à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥         â”‚
        â”‚                   (GET /api)       à¹ƒà¸«à¸¡à¹ˆ            â†â”€â”€
        â”‚                                                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Status Transition Diagram

```
                    START: pending
                          â”‚
                    User Action
                    (à¸¢à¸à¹€à¸¥à¸´à¸à¸ªà¸´à¸™à¸„à¹‰à¸²)
                          â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                                â”‚
          â–¼                                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Cancel All   â”‚              â”‚ Cancel Partial â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                               â”‚
           â”‚ CREATE receive record         â”‚ Validate qty
           â”‚ (qty = ordered - received)    â”‚
           â”‚                               â–¼
           â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                        â”‚ qty <= ordered? â”‚
           â”‚                        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚                             â”‚    â”‚
           â”‚                           YES   NO
           â”‚                             â”‚    â”‚
           â”‚                             â–¼    â–¼
           â”‚                          OK    Error
           â”‚                             â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Check Completion:    â”‚
                â”‚ (received+cancelled  â”‚
                â”‚  >= ordered)?        â”‚
                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                     â”‚          â”‚
                   YES          NO
                     â”‚          â”‚
                     â–¼          â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚completedâ”‚  â”‚ partial â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚          â”‚
                     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                            â”‚
                            â–¼
                   UPDATE purchase_orders
                   WHERE po_id = ?
                   SET status = [result]
```

---

## 9. State Diagram - Item

```
                  [pending]
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚              â”‚
        â–¼             â–¼              â–¼
    [receive]  [cancel_all]  [cancel_partial]
    (normal)       â”‚              â”‚
                   â”‚              â”œâ”€â”€â†’ [completed]
                   â”‚              â”‚
                   â”‚              â””â”€â”€â†’ [partial]
                   â”‚                   (if not full)
                   â”‚
                   â””â”€â”€â†’ [completed]
                        (marked as
                         is_cancelled=1)
```

---

## 10. Complete Sequence Diagram

```
User          Modal        Frontend      Backend         Database
 â”‚              â”‚              â”‚            â”‚               â”‚
 â”‚â”€ click â”€â”€â”€â”€â”€â†’â”‚              â”‚            â”‚               â”‚
 â”‚              â”‚ show modal   â”‚            â”‚               â”‚
 â”‚              â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚            â”‚               â”‚
 â”‚              â”‚ populate     â”‚            â”‚               â”‚
 â”‚              â”‚ defaults     â”‚            â”‚               â”‚
 â”‚              â”‚              â”‚            â”‚               â”‚
 â”‚â”€ select â”€â”€â”€â”€â†’â”‚              â”‚            â”‚               â”‚
 â”‚  type        â”‚ toggle      â”‚            â”‚               â”‚
 â”‚              â”‚ qty field   â”‚            â”‚               â”‚
 â”‚              â”‚              â”‚            â”‚               â”‚
 â”‚â”€ fill form  â†’â”‚              â”‚            â”‚               â”‚
 â”‚              â”‚              â”‚            â”‚               â”‚
 â”‚â”€ click â”€â”€â”€â”€â”€â†’â”‚ validate    â”‚            â”‚               â”‚
 â”‚  confirm     â”‚ form        â”‚            â”‚               â”‚
 â”‚              â”‚              â”‚            â”‚               â”‚
 â”‚              â”‚â”€ POST â”€â”€â”€â”€â”€â”€â†’â”‚            â”‚               â”‚
 â”‚              â”‚  JSON data   â”‚ parse     â”‚               â”‚
 â”‚              â”‚              â”‚ validate  â”‚               â”‚
 â”‚              â”‚              â”‚ logic     â”‚               â”‚
 â”‚              â”‚              â”‚            â”‚               â”‚
 â”‚              â”‚              â”‚â”€ BEGIN TRANSACTION â”€â”€â†’     â”‚
 â”‚              â”‚              â”‚            â”‚               â”‚
 â”‚              â”‚              â”‚â”€ Query â”€â”€â”€â†’â”‚ SELECT ...    â”‚
 â”‚              â”‚              â”‚  (check)  â†â”‚ return rows   â”‚
 â”‚              â”‚              â”‚            â”‚               â”‚
 â”‚              â”‚              â”‚â”€ Update â”€â”€â†’â”‚ UPDATE ... or â”‚
 â”‚              â”‚              â”‚  (do work) â”‚ INSERT ...    â”‚
 â”‚              â”‚              â”‚            â”‚               â”‚
 â”‚              â”‚              â”‚â”€ Compute status (logic)    â”‚
 â”‚              â”‚              â”‚            â”‚               â”‚
 â”‚              â”‚              â”‚â”€ Update â”€â”€â†’â”‚ UPDATE status â”‚
 â”‚              â”‚              â”‚  PO status â”‚               â”‚
 â”‚              â”‚              â”‚            â”‚               â”‚
 â”‚              â”‚              â”‚â”€ COMMIT â”€â”€â†’â”‚ (confirm)     â”‚
 â”‚              â”‚              â”‚            â”‚               â”‚
 â”‚              â”‚â†â”€ JSON â”€â”€â”€â”€â”€â”€â”‚            â”‚               â”‚
 â”‚              â”‚  response    â”‚            â”‚               â”‚
 â”‚              â”‚              â”‚            â”‚               â”‚
 â”‚â†â”€ alert â”€â”€â”€â”€â”€â”‚              â”‚            â”‚               â”‚
 â”‚  success     â”‚ close modal  â”‚            â”‚               â”‚
 â”‚              â”‚              â”‚            â”‚               â”‚
 â”‚              â”‚ reload page  â”‚            â”‚               â”‚
 â”‚              â”‚â”€ GET â”€â”€â”€â”€â”€â”€â”€â†’â”‚            â”‚               â”‚
 â”‚              â”‚              â”‚â”€ Query â”€â”€â”€â†’â”‚ SELECT ...    â”‚
 â”‚              â”‚              â”‚â†â”€ data â”€â”€â”€â”€â”‚ updated PO    â”‚
 â”‚              â”‚              â”‚            â”‚               â”‚
 â”‚â†â”€ display â”€â”€â”€â”‚              â”‚            â”‚               â”‚
 â”‚  updated     â”‚              â”‚            â”‚               â”‚
 â”‚              â”‚              â”‚            â”‚               â”‚
 â–¼              â–¼              â–¼            â–¼               â–¼
```

---

## 11. Error Handling Flow

```
                 Validate Input
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚              â”‚
        â–¼              â–¼              â–¼
    Type OK?      Qty OK?        Reason OK?
        â”‚              â”‚              â”‚
       NO             NO             NO
        â”‚              â”‚              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚              â”‚
                       â–¼              â–¼
                    Error Dialog
              (Show Error Message)
                       â”‚
                       â–¼
              User Fix & Retry
                       â”‚
                       â–¼
                   (Back to form)
                       â”‚
                      YES
                       â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                 â”‚
              â–¼                 â–¼
         Type=ALL?         Type=PARTIAL?
              â”‚                 â”‚
              â”‚                 â–¼
              â”‚            Validate Qty
              â”‚            <= ordered?
              â”‚                 â”‚
              â”‚              NO/YES
              â”‚                 â”‚
              â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚        â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚            â”‚
                       â–¼            â–¼
                    Proceed    Error Dialog
                       â”‚
                       â–¼
                   SUCCESS
```

---

**à¸ªà¸£à¸¸à¸›:** à¹„à¸”à¸­à¸°à¹à¸à¸£à¸¡à¹€à¸«à¸¥à¹ˆà¸²à¸™à¸µà¹‰à¹à¸ªà¸”à¸‡à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸‚à¸­à¸‡à¸£à¸°à¸šà¸šà¸à¸²à¸£à¸¢à¸à¹€à¸¥à¸´à¸à¸ªà¸´à¸™à¸„à¹‰à¸² 2 à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚ à¸ˆà¸²à¸à¸à¸²à¸£à¹€à¸¥à¸·à¸­à¸à¸›à¸£à¸°à¹€à¸ à¸— à¹„à¸›à¸ˆà¸™à¸–à¸¶à¸‡à¸à¸²à¸£à¸­à¸±à¸›à¹€à¸”à¸•à¸ªà¸–à¸²à¸™à¸° PO

**à¹€à¸§à¸­à¸£à¹Œà¸Šà¸±à¸™:** 1.0 | **à¸§à¸±à¸™à¸—à¸µà¹ˆ:** December 3, 2025
