# ЁЯЖХ р╕гр╕░р╕Ър╕Ър╕кр╕гр╣Йр╕▓р╕З PO р╕кр╕│р╕лр╕гр╕▒р╕Ър╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И

## ЁЯУЛ р╕ар╕▓р╕Юр╕гр╕зр╕б
р╕гр╕░р╕Ър╕Ър╕Щр╕╡р╣Йр╕Кр╣Ир╕зр╕вр╣Гр╕лр╣Йр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕кр╕▓р╕бр╕▓р╕гр╕Цр╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕Ър╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н (PO) р╕кр╕│р╕лр╕гр╕▒р╕Ър╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╕вр╕▒р╕Зр╣Др╕бр╣Ир╕нр╕вр╕╣р╣Ир╣Гр╕Щр╕гр╕░р╕Ър╕Ъ (р╣Др╕бр╣Ир╕бр╕╡ SKU р╕лр╕гр╕╖р╕н Barcode) р╣Вр╕Фр╕вр╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╣Йр╣Ар╕кр╕гр╣Зр╕Ир╕кр╕бр╕Ър╕╣р╕гр╕Ур╣Мр╕Бр╣Ир╕нр╕Щ р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Ир╕░р╕Цр╕╣р╕Бр╕Ир╕▒р╕Фр╣Ар╕Бр╣Зр╕Ър╕Кр╕▒р╣Ир╕зр╕Др╕гр╕▓р╕зр╣Бр╕ер╕░р╕гр╕нр╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╕Ир╕▓р╕Бр╕Ьр╕╣р╣Йр╕Ър╕гр╕┤р╕лр╕▓р╕гр╕Хр╣Ир╕нр╣Др╕Ы

---

## ЁЯПЧя╕П р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е

### р╕Хр╕▓р╕гр╕▓р╕З `temp_products` (р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Кр╕▒р╣Ир╕зр╕Др╕гр╕▓р╕з)
| р╕Др╕нр╕ер╕▒р╕бр╕Щр╣М | р╕Ыр╕гр╕░р╣Ар╕ар╕Ч | р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф |
|--------|--------|-----------|
| `temp_product_id` | INT | р╕гр╕лр╕▒р╕кр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Кр╕▒р╣Ир╕зр╕Др╕гр╕▓р╕з (Auto Increment) |
| `product_name` | VARCHAR(100) | р╕Кр╕╖р╣Ир╕нр╕кр╕┤р╕Щр╕Др╣Йр╕▓ * |
| `provisional_sku` | VARCHAR(255) | SKU р╕Кр╕▒р╣Ир╕зр╕Др╕гр╕▓р╕з (nullable) |
| `provisional_barcode` | VARCHAR(50) | Barcode р╕Кр╕▒р╣Ир╕зр╕Др╕гр╕▓р╕з (nullable) |
| `unit` | VARCHAR(20) | р╕лр╕Щр╣Ир╕зр╕вр╕Щр╕▒р╕Ъ (default: р╕Кр╕┤р╣Йр╕Щ) |
| `remark` | TEXT | р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕р╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б |
| `status` | ENUM | `draft`, `pending_approval`, `approved`, `rejected`, `converted` |
| `po_id` | INT | р╕ер╕┤р╕Зр╕Бр╣Мр╣Др╕Ыр╕вр╕▒р╕З `purchase_orders` * |
| `created_by` | INT | р╕Ьр╕╣р╣Йр╕кр╕гр╣Йр╕▓р╕З (user_id) * |
| `approved_by` | INT | р╕Ьр╕╣р╣Йр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤ (user_id) |
| `created_at` | TIMESTAMP | р╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕З |
| `approved_at` | TIMESTAMP | р╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤ |

### р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕З `purchase_order_items`
р╣Ар╕Юр╕┤р╣Ир╕бр╕Др╕нр╕ер╕▒р╕бр╕Щр╣М:
- `temp_product_id` (INT, nullable) - р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╣Др╕Ыр╕вр╕▒р╕З temp_products р╣Ар╕бр╕╖р╣Ир╕нр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Ар╕Ыр╣Зр╕Щр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И

---

## ЁЯУБ р╣Др╕Яр╕ер╣Мр╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕З

### 1. **Database Migration**
ЁЯУД `db/add_temp_products_table.sql`
- р╕кр╕гр╣Йр╕▓р╕Зр╕Хр╕▓р╕гр╕▓р╕З `temp_products`
- р╣Ар╕Юр╕┤р╣Ир╕бр╕Др╕нр╕ер╕▒р╕бр╕Щр╣М `temp_product_id` р╣Гр╕Щ `purchase_order_items`
- р╕кр╕гр╣Йр╕▓р╕Зр╕Др╕╡р╕вр╣Мр╣Бр╕ер╕░ indexes

**р╕зр╕┤р╕Шр╕╡р╣Гр╕Кр╣Й:**
```bash
# р╕гр╕▒р╕Щ SQL migration р╕Ьр╣Ир╕▓р╕Щ phpMyAdmin р╕лр╕гр╕╖р╕н command line
mysql -u username -p database_name < db/add_temp_products_table.sql
```

### 2. **Frontend - р╕кр╕гр╣Йр╕▓р╕З PO р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И**
ЁЯУД `orders/purchase_order_create_new_product.php`
- р╕лр╕Щр╣Йр╕▓р╕Яр╕нр╕гр╣Мр╕бр╕кр╕│р╕лр╕гр╕▒р╕Ър╕кр╕гр╣Йр╕▓р╕З PO р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И
- р╕нр╕Щр╕╕р╕Нр╕▓р╕Хр╣Гр╕лр╣Йр╣Ар╕Юр╕┤р╣Ир╕бр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕лр╕ер╕▓р╕вр╕гр╕▓р╕вр╕Бр╕▓р╕гр╣Гр╕Щр╕Др╕гр╕▒р╣Йр╕Зр╣Ар╕Фр╕╡р╕вр╕з
- р╣Бр╕кр╕Фр╕Зр╕кр╕гр╕╕р╕Ыр╕вр╕нр╕Фр╕гр╕зр╕бр╣Бр╕Ър╕Ъ real-time
- р╕кр╣Ир╕зр╕Щр╕гр╕▒р╕Ър╕кр╕┤р╕Щр╕Др╣Йр╕▓:
  - р╕Кр╕╖р╣Ир╕нр╕кр╕┤р╕Щр╕Др╣Йр╕▓ (р╕Ър╕▒р╕Зр╕Др╕▒р╕Ъ)
  - р╕лр╕Щр╣Ир╕зр╕вр╕Щр╕▒р╕Ъ
  - р╕Ир╕│р╕Щр╕зр╕Щ (р╕Ър╕▒р╕Зр╕Др╕▒р╕Ъ)
  - р╕гр╕▓р╕Др╕▓/р╕лр╕Щр╣Ир╕зр╕в (р╕Ър╕▒р╕Зр╕Др╕▒р╕Ъ)
  - р╕кр╣Ир╕зр╕Щр╕ер╕Ф (%)

### 3. **API - р╕Ър╕▒р╕Щр╕Чр╕╢р╕Б PO р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И**
ЁЯУД `api/purchase_order_new_product_api.php`
- р╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Бр╕Яр╕нр╕гр╣Мр╕б `purchase_order_create_new_product.php`
- р╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕Ъ PO р╣Гр╕лр╕бр╣И
- р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Кр╕▒р╣Ир╕зр╕Др╕гр╕▓р╕зр╣Др╕Ы `temp_products`
- р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕Бр╕▒р╕Ъ `purchase_order_items`
- р╕кр╣Ир╕Зр╕Бр╕ер╕▒р╕Ъ PO number р╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕З

**р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕┤р╕Чр╕Шр╕┤:** Admin/Manager р╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ

### 4. **Frontend - р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╣Бр╕ер╕░р╣Бр╕Ыр╕ер╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓**
ЁЯУД `products/convert_temp_to_product.php`
- р╣Бр╕кр╕Фр╕Зр╕гр╕▓р╕вр╕Бр╕▓р╕гр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Кр╕▒р╣Ир╕зр╕Др╕гр╕▓р╕зр╕Чр╕╡р╣Ир╕гр╕нр╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤
- Admin р╕кр╕▓р╕бр╕▓р╕гр╕Ц:
  - тЬУ **р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤**: р╕гр╕░р╕Ър╕╕ SKU, Barcode р╣Бр╕ер╕░р╣Бр╕Ыр╕ер╕Зр╣Ар╕Ыр╣Зр╕Щр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Цр╕▓р╕зр╕г
  - тЬХ **р╕Ыр╕Пр╕┤р╣Ар╕кр╕Ш**: р╕гр╕░р╕Ър╕╕р╣Ар╕лр╕Хр╕╕р╕Ьр╕ер╕Бр╕▓р╕гр╕Ыр╕Пр╕┤р╣Ар╕кр╕Ш
- р╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Бр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤:
  - р╕кр╕┤р╕Щр╕Др╣Йр╕▓ temp р╕Ир╕░р╕Цр╕╣р╕Бр╣Бр╕Ыр╕ер╕Зр╣Ар╕Ыр╣Зр╕Щ `products` р╕Ыр╕Бр╕Хр╕┤
  - `purchase_order_items` р╕Ир╕░р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╣Др╕Ыр╕вр╕▒р╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И

**р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕┤р╕Чр╕Шр╕┤:** Admin р╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ

---

## ЁЯФД р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 1я╕ПтГг: р╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕Ъ PO р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И
1. р╣Др╕Ыр╕Чр╕╡р╣И **р╣Гр╕Ър╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н (Purchase Orders)**
2. р╕Др╕ер╕┤р╕Б **"ЁЯЖХ р╕кр╕гр╣Йр╕▓р╕З PO - р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И"** (р╕Ыр╕╕р╣Ир╕бр╣Ар╕Вр╕╡р╕вр╕з)
3. р╕Бр╕гр╕нр╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕е:
   - р╣Ар╕ер╕╖р╕нр╕Бр╕Лр╕▒р╕Юр╕Юр╕ер╕▓р╕вр╣Ар╕вр╕нр╕гр╣М *
   - р╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н *
   - р╣Ар╕ер╕╖р╕нр╕Бр╕кр╕Бр╕╕р╕ер╣Ар╕Зр╕┤р╕Щ *
   - р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕ (р╕Цр╣Йр╕▓р╕бр╕╡)
4. р╣Ар╕Юр╕┤р╣Ир╕бр╕кр╕┤р╕Щр╕Др╣Йр╕▓:
   - р╕Бр╕гр╕нр╕Бр╕Кр╕╖р╣Ир╕нр╕кр╕┤р╕Щр╕Др╣Йр╕▓ *
   - р╕лр╕Щр╣Ир╕зр╕вр╕Щр╕▒р╕Ъ (default: р╕Кр╕┤р╣Йр╕Щ)
   - р╕Ир╕│р╕Щр╕зр╕Щ *
   - р╕гр╕▓р╕Др╕▓/р╕лр╕Щр╣Ир╕зр╕в *
   - р╕кр╣Ир╕зр╕Щр╕ер╕Ф % (р╕Цр╣Йр╕▓р╕бр╕╡)
5. р╕Др╕ер╕┤р╕Б **"р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╣Гр╕Ъ PO"**

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 2я╕ПтГг: Admin р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╣Бр╕ер╕░р╣Бр╕Ыр╕ер╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓
1. р╣Др╕Ыр╕Чр╕╡р╣И **р╕кр╕┤р╕Щр╕Др╣Йр╕▓ > тЬЕ р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╣Бр╕ер╕░р╣Бр╕Ыр╕ер╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И**
2. р╕Фр╕╣р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕╡р╣Ир╕гр╕нр╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤
3. р╕кр╕│р╕лр╕гр╕▒р╕Ър╣Бр╕Хр╣Ир╕ер╕░р╕кр╕┤р╕Щр╕Др╣Йр╕▓:
   - **р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤**: 
     - р╕Бр╕гр╕нр╕Б SKU (р╕Цр╣Йр╕▓р╕бр╕╡) тЪая╕П р╕Хр╣Йр╕нр╕Зр╣Др╕бр╣Ир╕Лр╣Йр╕│
     - р╕Бр╕гр╕нр╕Б Barcode (р╕Цр╣Йр╕▓р╕бр╕╡) тЪая╕П р╕Хр╣Йр╕нр╕Зр╣Др╕бр╣Ир╕Лр╣Йр╕│
     - р╕гр╕░р╕Ър╕╕р╕кр╕╡р╕лр╕гр╕╖р╕нр╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕ (р╕Цр╣Йр╕▓р╕бр╕╡)
     - р╣Ар╕ер╕╖р╕нр╕Б "р╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Бр╕вр╕Бр╣Ар╕Ыр╣Зр╕Щр╕лр╕ер╕▓р╕вр╣Бр╕Цр╕з" (р╕Цр╣Йр╕▓р╕Хр╣Йр╕нр╕З)
     - р╕Др╕ер╕┤р╕Б **"тЬУ р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤"**
   - **р╕Ыр╕Пр╕┤р╣Ар╕кр╕Ш**:
     - р╕гр╕░р╕Ър╕╕р╣Ар╕лр╕Хр╕╕р╕Ьр╕ер╕Бр╕▓р╕гр╕Ыр╕Пр╕┤р╣Ар╕кр╕Ш
     - р╕Др╕ер╕┤р╕Б **"тЬХ р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕Ыр╕Пр╕┤р╣Ар╕кр╕Ш"**

---

## ЁЯУК р╕кр╕Цр╕▓р╕Щр╕░р╕кр╕┤р╕Щр╕Др╣Йр╕▓ (Status Flow)

```
draft 
   тЖУ
pending_approval (р╕гр╕нр╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤)
   тФЬтФАтЖТ approved (р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╣Бр╕ер╣Йр╕з)
   тФВ      тЖУ
   тФВ   converted тЬУ (р╣Бр╕Ыр╕ер╕Зр╣Ар╕Ыр╣Зр╕Щр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Цр╕▓р╕зр╕гр╣Бр╕ер╣Йр╕з)
   тФВ
   тФФтФАтЖТ rejected тЬЧ (р╕Ыр╕Пр╕┤р╣Ар╕кр╕Шр╣Бр╕ер╣Йр╕з)
```

---

## ЁЯФР р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕┤р╕Чр╕Шр╕┤р╣М (Permissions)

| р╕Бр╕▓р╕гр╕Бр╕гр╕░р╕Чр╕│ | Admin | Manager | Stock Staff |
|---------|-------|---------|-------------|
| р╕кр╕гр╣Йр╕▓р╕З PO р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И | тЬУ | тЬУ | тЬЧ |
| р╕Фр╕╣р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕гр╕нр╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤ | тЬУ | тЬУ | тЬЧ |
| р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╕кр╕┤р╕Щр╕Др╣Йр╕▓ | тЬУ | тЬЧ | тЬЧ |
| р╕Ыр╕Пр╕┤р╣Ар╕кр╕Шр╕кр╕┤р╕Щр╕Др╣Йр╕▓ | тЬУ | тЬЧ | тЬЧ |

---

## ЁЯРЫ р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕бр╣Бр╕ер╕░р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕В

### р╕Хр╕▓р╕гр╕▓р╕З Temp Products р╕зр╣Ир╕▓р╕Зр╣Ар╕Ыр╕ер╣Ир╕▓?
- р╣Ар╕Кр╣Ир╕Щр╕бр╕╡ PO р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣Ир╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕ер╣Йр╕з р╣Бр╕Хр╣Ир╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Др╕Фр╣Йр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤
- р╕Др╕│р╕кр╕▒р╣Ир╕З SQL р╣Ар╕Юр╕╖р╣Ир╕нр╕Фр╕╣р╕кр╕Хр╣Ир╕н:
```sql
SELECT * FROM temp_products WHERE status IN ('draft', 'pending_approval');
```

### р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕Фр╕╣ PO р╕Чр╕╡р╣Ир╕бр╕╡р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И
```sql
SELECT 
    po.po_id, 
    po.po_number, 
    tp.product_name, 
    tp.status
FROM purchase_orders po
JOIN temp_products tp ON po.po_id = tp.po_id
ORDER BY po.created_at DESC;
```

### р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕кр╕Цр╕▓р╕Щр╕░р╕кр╕┤р╕Щр╕Др╣Йр╕▓
```sql
UPDATE temp_products 
SET status = 'pending_approval' 
WHERE temp_product_id = <ID>;
```

---

## ЁЯУ▒ API Endpoints

### 1. р╕кр╕гр╣Йр╕▓р╕З PO р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И
**POST** `/api/purchase_order_new_product_api.php`

**Request Parameters:**
```
supplier_id: int (required)
order_date: date (required)
currency_id: int (required)
po_remark: string
product_name[]: array (required, min 1)
unit[]: array
quantity[]: array (required, must > 0)
unit_price[]: array (required, must >= 0)
discount[]: array
```

**Response:**
```json
{
  "success": true,
  "message": "р╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕Ъ PO р╕кр╕│р╣Ар╕гр╣Зр╕И",
  "po_id": 123,
  "po_number": "PO-2025-00123"
}
```

### 2. р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╣Бр╕ер╕░р╣Бр╕Ыр╕ер╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓
**POST** `/products/convert_temp_to_product.php`

**Request:**
```
action: "approve_and_convert"
temp_product_id: int
sku: string (optional)
barcode: string (optional)
remark_color: string
remark_split: int (0 or 1)
```

**Response:**
```json
{
  "success": true,
  "message": "р╣Бр╕Ыр╕ер╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Ар╕Ыр╣Зр╕Щр╕Цр╕▓р╕зр╕гр╕кр╕│р╣Ар╕гр╣Зр╕И",
  "product_id": 45
}
```

### 3. р╕Ыр╕Пр╕┤р╣Ар╕кр╕Шр╕кр╕┤р╕Щр╕Др╣Йр╕▓
**POST** `/products/convert_temp_to_product.php`

**Request:**
```
action: "reject"
temp_product_id: int
reason: string
```

---

## ЁЯЪА р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

1. **р╕гр╕▒р╕Щ Database Migration:**
   ```bash
   mysql -u ichoice_admin -p ichoice_ < db/add_temp_products_table.sql
   ```

2. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Др╕Яр╕ер╣Мр╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕З:**
   - тЬУ `orders/purchase_order_create_new_product.php`
   - тЬУ `api/purchase_order_new_product_api.php`
   - тЬУ `products/convert_temp_to_product.php`

3. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Ыр╕╕р╣Ир╕бр╣Гр╕Щ Purchase Orders:**
   - тЬУ `orders/purchase_orders.php` - р╣Ар╕Юр╕┤р╣Ир╕бр╕Ыр╕╕р╣Ир╕бр╕кр╕гр╣Йр╕▓р╕З PO р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И

4. **р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ:**
   - р╕ер╕нр╕Зр╕кр╕гр╣Йр╕▓р╕З PO р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И
   - р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Хр╕▓р╕гр╕▓р╕З `temp_products` р╕зр╣Ир╕▓р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕е
   - Admin р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╕кр╕┤р╕Щр╕Др╣Йр╕▓
   - р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ `products` р╕Хр╕▓р╕гр╕▓р╕З р╕зр╣Ир╕▓р╕бр╕╡р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И

---

## ЁЯУЭ р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕р╕кр╕│р╕Др╕▒р╕Н

тЪая╕П **р╕Вр╣Йр╕нр╕Бр╕│р╕лр╕Щр╕Ф SKU/Barcode:**
- SKU р╣Бр╕ер╕░ Barcode р╕Хр╣Йр╕нр╕Зр╣Ар╕Ыр╣Зр╕Щ unique р╕Цр╣Йр╕▓р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г
- р╕лр╕▓р╕Бр╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕Бр╕гр╕нр╕Б р╣Гр╕лр╣Йр╕Ыр╕ер╣Ир╕нр╕вр╕зр╣Ир╕▓р╕Зр╣Др╕зр╣Й
- р╕гр╕░р╕Ър╕Ър╕Ир╕░р╕вр╕нр╕бр╣Гр╕лр╣Йр╕лр╕ер╕▓р╕вр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕бр╕╡ NULL р╣Гр╕Щ SKU/Barcode

тЬЕ **Security:**
- р╣Ар╕Йр╕Юр╕▓р╕░ Admin/Manager р╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щр╕Чр╕╡р╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕кр╕гр╣Йр╕▓р╕З PO р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И
- р╣Ар╕Йр╕Юр╕▓р╕░ Admin р╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щр╕Чр╕╡р╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤/р╕Ыр╕Пр╕┤р╣Ар╕кр╕Ш
- р╕бр╕╡ Transaction commit/rollback р╣Ар╕Юр╕╖р╣Ир╕нр╕Ыр╣Йр╕нр╕Зр╕Бр╕▒р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Др╕бр╣Ир╕кр╕нр╕Фр╕Др╕ер╣Йр╕нр╕З

---

## ЁЯУЮ р╕Хр╕┤р╕Фр╕Хр╣Ир╕нр╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б
р╕лр╕▓р╕Бр╕бр╕╡р╕Вр╣Йр╕нр╕кр╕Зр╕кр╕▒р╕вр╕лр╕гр╕╖р╕нр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б р╣Вр╕Ыр╕гр╕Фр╣Бр╕Ир╣Йр╕З
